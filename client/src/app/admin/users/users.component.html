<div class="container" id="users">
  <div class="row">
    <div class="col-sm-12 text-center m-bot-50">
      <h2> User management </h2>
    </div>
  </div>
  <div class="row users-header">
    <div class="col-sm-3 text-left">
      <h6>Name / Role</h6>
    </div>
    <div class="col-sm-4 text-center">
      <h6>Email</h6>
    </div>
    <div class="col-sm-2 text-center">
      <h6>Phone</h6>
    </div>
    <div class="col-sm-3 text-right">
      <h6>Actions</h6>
    </div>
  </div>
  <div class="row user-row align-items-center" *ngFor="let user of users">
    <div class="col-sm-3 text-left">
      <p>{{user.name}}
        <br>
        <small>
          <strong>{{user.role}}</strong>
        </small>
      </p>
    </div>
    <div class="col-sm-4 text-center">
      <p>{{user.email}}</p>
    </div>
    <div class="col-sm-2 text-center">
      <p>{{user.phone}}</p>
    </div>
    <div class="col-sm-3 text-right user-actions-column">
      <button mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>
          <i class="material-icons">close</i>
        </mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="deleteUser(user._id)"> Sure? </button>
      </mat-menu>
      <button mat-icon-button>
        <button mat-icon-button [matMenuTriggerFor]="menu">
          <mat-icon>
            <i class="material-icons">verified_user</i>
          </mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="changeMyRole(user._id,user.role)"> Sure? </button>
        </mat-menu>
      </button>
      <button mat-icon-button class="addtoEnvelope" (click)=selectedForEmail(user.email)>
        <i class="material-icons">email</i>
      </button>
    </div>
  </div>
  <div class="row add-all-row">
    <div class="col-sm-3 offset-sm-9 text-right">
      <button mat-icon-button class="allContacts"> All
        <i class="material-icons">email</i>
      </button>
    </div>
  </div>
  <div class="row" id="newsletter-row">
    <div class="col-md-6">
        <h6 class="m-bot-10">Send a newsletter to our customers</h6>
        <ul class="m-bot-20">
          <li>
            <small>
              <strong>Use this textarea to write the email text messagge for the selected customers.</strong>
            </small>
          </li>
          <li>
            <small>
              <strong>You can use some HTML if you need to.</strong>
            </small>
          </li>
        </ul>
    </div>
    <div class="col-md-6">
      <mat-form-field class="full-width">
        <textarea matInput placeholder="Your text here!" [(ngModel)]="emailText" required placeholder="Write the message here.">
        </textarea>
      </mat-form-field>
      <button mat-icon-button (click)="sendMassiveEmail()">
        <mat-icon>
          <i class="material-icons">send</i>
        </mat-icon>
        Send email
      </button>
      <div class="cc-email" *ngIf="envelope&&envelope.length>0">Cc: {{envelope | json}}</div>
    </div>
  </div>
</div>
